###############################################################################
# matrix-textvoicevideo · Self-Hosted Discord Alternative
# Matrix + Coturn + Jitsi + Element Web · Text · Voice · Video
#
# ─────────────────────────────────────────────────────────────────────────────
# SETUP INSTRUCTIONS
# ─────────────────────────────────────────────────────────────────────────────
# Do NOT edit secrets in this file manually.
# Run setup.sh — it will generate all secrets and replace every placeholder:
#
#   git clone https://github.com/bmartino1/matrix-textvoicevideo.git /mnt/user/appdata/matrix-textvoicevideo
#   cd /mnt/user/appdata/matrix-textvoicevideo
#   sudo bash setup.sh --domain chat.yourdomain.com
#
# setup.sh will:
#   • Auto-detect your public IP and Unraid LAN IP
#   • Generate cryptographically secure secrets (openssl)
#   • Overwrite this .env with real values
#   • Update all config files in data/ with the same values
#   • Run certbot for Let's Encrypt TLS certificates
#   • Set correct permissions for Unraid
# ─────────────────────────────────────────────────────────────────────────────
#
# For non-Unraid systems, also uncomment the
#   # env_file: .env
# line inside each service in docker-compose.yml
###############################################################################

############################
# IDENTITY — DO NOT CHANGE AFTER FIRST RUN
# setup.sh sets these from --domain argument
############################
SERVER_NAME="domain_name"
PUBLIC_URL="https://domain_name"
SCHEME="https"

############################
# NETWORK
# setup.sh auto-detects these via curl + ip command
############################
EXTERNAL_IP="PUBLIC_IP"
INTERNAL_IP="UNRAID_IP"

############################
# POSTGRES
############################
POSTGRES_USER="synapse"
POSTGRES_PASSWORD="CHANGEME_Postgres"
POSTGRES_DB="synapse"
POSTGRES_INITDB_ARGS="--encoding=UTF8 --lc-collate=C --lc-ctype=C"

############################
# SYNAPSE SECRETS
# All generated by: openssl rand -base64 48
############################
SYNAPSE_REGISTRATION_SECRET="CHANGEME_Registration"
SYNAPSE_MACAROON_KEY="CHANGEME_Setup"
SYNAPSE_FORM_SECRET="CHANGEME_Secret"

############################
# TURN / COTURN
############################
TURN_SECRET="CHANGEME_CoTurn"

############################
# TLS / CERTBOT
############################
NO_TLS="false"
ADMIN_EMAIL="admin@domain_name"

############################
# PATHS
# Unraid default — change --data-dir in setup.sh for other systems
############################
DATA_DIR="/mnt/user/appdata/matrix-textvoicevideo/data"

############################
# TIMEZONE
############################
TZ="America/Chicago"

###############################################################################
# JITSI — Self-Hosted Video (meet.domain_name)
# All domain values are derived from SERVER_NAME by setup.sh
###############################################################################
JITSI_DOMAIN="meet.domain_name"
JITSI_PUBLIC_URL="https://meet.domain_name"

JITSI_AUTH_DOMAIN="auth.meet.domain_name"
JITSI_INTERNAL_MUC_DOMAIN="internal-muc.meet.domain_name"
JITSI_MUC_DOMAIN="muc.meet.domain_name"

# Jitsi component auth passwords — generated by: openssl rand -base64 32
JICOFO_AUTH_PASSWORD="CHANGEME_jicofo"
JVB_AUTH_PASSWORD="CHANGEME_JVB"

# JVB public IP for WebRTC — same as EXTERNAL_IP, set by setup.sh
JVB_ADVERTISE_IPS="PUBLIC_IP"
JVB_PORT="10000"

# Jitsi handles its own TLS via nginx — keep these 0
JITSI_ENABLE_LETSENCRYPT="0"
JITSI_ENABLE_HTTP_REDIRECT="0"
